
@{
    ViewBag.Title = "UpdateAccommodation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
 
<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.min.js" type="text/javascript"></script>
<script src="https://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.10.0.js" type="text/javascript"></script>

@if (@Session["LanguageName"].ToString() == "ar" || @Session["LanguageName"].ToString() == "fa" || @Session["LanguageName"].ToString() == "ur")
{
    <style>
        /*media (min-width: 768px){
        #exampleFullForm .form-horizontal .form-control-label {
            text-align: right !important;
        }}
                input.form-control {
                    text-align: end;
                }
                select {
                    text-align-last: end;
                }*/
        .MultiLang {
            display: inline-block !important;
        }
    </style>
    <script>
        alert("Farooq Lang");
    </script>
}
 <style>
    .MultiLang {
        display: none;
    }

    @@media (min-width: 768px) {
        .form-horizontal .form-control-label {
            padding-top: 7px;
            margin-bottom: 0;
            text-align: left !important;
        }
    }
</style>

 <style>
     .row-lg > .col, .row-lg > .col-1, .row-lg > .col-10, .row-lg > .col-11, .row-lg > .col-12, .row-lg > .col-2, .row-lg > .col-3, .row-lg > .col-4, .row-lg > .col-5, .row-lg > .col-6, .row-lg > .col-7, .row-lg > .col-8, .row-lg > .col-9, .row-lg > .col-lg, .row-lg > .col-lg-1, .row-lg > .col-lg-10, .row-lg > .col-lg-11, .row-lg > .col-lg-12, .row-lg > .col-lg-2, .row-lg > .col-lg-3, .row-lg > .col-lg-4, .row-lg > .col-lg-5, .row-lg > .col-lg-6, .row-lg > .col-lg-7, .row-lg > .col-lg-8, .row-lg > .col-lg-9, .row-lg > .col-md, .row-lg > .col-md-1, .row-lg > .col-md-10, .row-lg > .col-md-11, .row-lg > .col-md-12, .row-lg > .col-md-2, .row-lg > .col-md-3, .row-lg > .col-md-4, .row-lg > .col-md-5, .row-lg > .col-md-6, .row-lg > .col-md-7, .row-lg > .col-md-8, .row-lg > .col-md-9, .row-lg > .col-sm, .row-lg > .col-sm-1, .row-lg > .col-sm-10, .row-lg > .col-sm-11, .row-lg > .col-sm-12, .row-lg > .col-sm-2, .row-lg > .col-sm-3, .row-lg > .col-sm-4, .row-lg > .col-sm-5, .row-lg > .col-sm-6, .row-lg > .col-sm-7, .row-lg > .col-sm-8, .row-lg > .col-sm-9, .row-lg > .col-xl, .row-lg > .col-xl-1, .row-lg > .col-xl-10, .row-lg > .col-xl-11, .row-lg > .col-xl-12, .row-lg > .col-xl-2, .row-lg > .col-xl-3, .row-lg > .col-xl-4, .row-lg > .col-xl-5, .row-lg > .col-xl-6, .row-lg > .col-xl-7, .row-lg > .col-xl-8, .row-lg > .col-xl-9, .row-lg > .col-xxl, .row-lg > .col-xxl-1, .row-lg > .col-xxl-10, .row-lg > .col-xxl-11, .row-lg > .col-xxl-12, .row-lg > .col-xxl-2, .row-lg > .col-xxl-3, .row-lg > .col-xxl-4, .row-lg > .col-xxl-5, .row-lg > .col-xxl-6, .row-lg > .col-xxl-7, .row-lg > .col-xxl-8, .row-lg > .col-xxl-9 {
         padding-right: 10.786rem !important;
         padding-left: 5.786rem !important;
     }
 </style>
 <div class="alert dark alert-icon alert-success alert-dismissible" role="alert" id="Success" style="display:none">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">×</span>
    </button>
    <i class="icon wb-check" aria-hidden="true"></i><span id="Successfully"></span>
</div>

  <div class="alert dark alert-warning alert-dismissible" role="alert" id="Failure" style="display:none">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">×</span>
    </button>
    <i class="icon wb-check" aria-hidden="true"></i> <span id="FailureMSG"></span>
</div>

    <div class="page-header">
        <h1 class="page-title"><i class="fa fa-circle" aria-hidden="true"></i> Update Accommodation <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.UpdateAccommodation</span></h1>

        <div class="page-header-actions">

        </div>
    </div>

    <div class="panel">
        <div class="panel-heading">
            <h3 class="panel-title">

                <span class="panel-desc">
                    @*@Session["User"]*@
                </span>
            </h3>

        </div>

        <div class="panel-body"> 
            <div class="row row-lg"  ng-app="MyApp" ng-controller="MyController">
                <div ng-show="showLoader">
                    <!-- so this div containing img will be dislpayed only when the showLoader is equal to true @*UpdateAccommodationform.$valid &&*@-->
                    <img src="~/Image/demo_wait.gif" />
                </div>
                <form class="row row-lg" name="UpdateAccommodationform" novalidate ng-submit="UpdateAccommodation()" />
                <div class="col-xl-6 form-horizontal">
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Email Id <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.EmailId</span>
                            <span class="required">*</span>
                        </label>
                        <div class="col-xl-12 col-md-9">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="icon wb-envelope" aria-hidden="true"></i>
                                </span>
                                <input type="text" class="form-control" name="EmailId" value="" required ng-model="UpdateAccommodations.EmailId" ng-value="EmailId">
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Contact No <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.ContactNo</span>
                            <span class="required">*</span>
                        </label>
                        <div class=" col-xl-12 col-md-9">
                            <input type="text" class="form-control" name="ContactNo" value="" placeholder="Contact No"  ng-pattern="/^[0-9-\s]+$/" required ng-model="UpdateAccommodations.ContactNo" ng-value="ContactNo">
                            <span style="color:Red" ng-show="UpdateAccommodationform.ContactNo.$dirty&&UpdateAccommodationform.ContactNo.$error.pattern">only Numbers Allowed (0-9 -)</span>
                        </div>  
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Property Category <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.PropertyCategory</span>
                            <span class="required">*</span>
                        </label>
                        <div class="col-xl-12 col-md-9">
                            <select class="form-control PropertyCategory" id="PropertyCategory" name="PropertyCategory" required ng-model="UpdateAccommodations.PropertyCategory">
                                <option value="" disabled selected>Select Property-Category</option>
                                <option value="Roomph Standard">Roomph Standard</option>
                                <option value="Roomph Premium">Roomph Premium</option>
                                <option value="Roomph Rooms">Roomph Rooms</option>
                                <option value="Feature">Feature</option>
                            </select>
                        </div>
                    </div> 
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Currency <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.Currency</span>
                            <span class="required">*</span>
                        </label>
                        <div class="col-xl-12 col-md-9">
                            <select class="form-control" id="CurrencyId" name="CurrencyId" required ng-model="UpdateAccommodations.CurrencyId">
                                <option value="" disabled>Select Currency</option> 
                                <option ng-repeat="optionCurrency in Currency" value="{{optionCurrency.CurrencyId}}">{{optionCurrency.CurrencyName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Extra Fee <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.ExtraFee</span>
                            <span class="required"></span>
                        </label>
                        <div class="col-xl-12 col-md-9"> 
                            <select class="form-control" id="ExtraFeeTypeId" name="ExtraFeeTypeId" required ng-model="UpdateAccommodations.ExtraFeeTypeId">

                                <option value="" disabled> Select Extra-Fee</option>
                                <option ng-repeat="option in ExtraFee" value="{{option.ExtraFeeTypeId}}">{{option.ExtraFeeTypeName}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 form-horizontal"> 
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Post Code <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.PostCode</span>
                            <span class="required">*</span>
                        </label>
                        <div class=" col-xl-12 col-md-9">
                            <input type="text" class="form-control" name="PostCode" value="" placeholder="PostCode"   ng-pattern="/^[A-Z a-z 0-9 , . -\s]+$/" required ng-model="UpdateAccommodations.PostCode" ng-value="PostCode">
                            <span style="color:Red" ng-show="UpdateAccommodationform.PostCode.$dirty&&UpdateAccommodationform.PostCode.$error.pattern">special characters are not allowed</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Latitude <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.Latitude</span>
                            <span class="required">*</span>
                        </label>
                        <div class=" col-xl-12 col-md-9">
                            <input type="text" class="form-control" name="Latitude" value="" placeholder="Latitude" ng-pattern="/^[0-9.-\s]+$/" required ng-model="UpdateAccommodations.Latitude" ng-value="Latitude"> 
                            <span style="color:Red" ng-show="UpdateAccommodationform.Latitude.$dirty&&UpdateAccommodationform.Latitude.$error.pattern">only Numbers Allowed (0-9 .)</span>
                        </div> 
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Longitude <span class="MultiLang"> @BookingWhizzAdmins.Resourecs.HomeTexts.Longitude</span>
                            <span class="required">*</span>
                        </label>
                        <div class=" col-xl-12 col-md-9">
                            <input type="text" class="form-control" name="Longitude" value="" placeholder="Longitude" ng-pattern="/^[0-9.-\s]+$/" required ng-model="UpdateAccommodations.Longitude" ng-value="Longitude">
                            <span style="color:Red" ng-show="UpdateAccommodationform.Longitude.$dirty&&UpdateAccommodationform.Longitude.$error.pattern">only Numbers Allowed (0-9 - .)</span>
                        </div> 
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-12 col-md-3 form-control-label">
                            Roomph
                            <span class="required"></span>
                        </label>
                        <div class=" col-xl-12 col-md-9">
                            <div class="checkbox-custom checkbox-success">
                                <input type="checkbox" ng-model="UpdateAccommodations.SearchEngine" value="1" ng-checked="SearchEngine==1" ng-init="UpdateAccommodations.SearchEngine=true">
                                <label id="WebSearch" ng-value="selectedList = UpdateAccommodations.SearchEngine ? listOptions.min : listOptions.max">
                                    <span ng-repeat="info in selectedList">{{info}}</span>
                                </label>
                                
                            </div>
                        </div> 
                    </div>
                </div>
                <div class="form-group col-xl-12 text-right padding-top-m">
                    <button type="submit" class="btn btn-primary">{{btntext}}</button>
                </div>     
                </form>
            </div>
        </div>
    </div> 

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script>
    var app = angular.module('MyApp', ['ui.bootstrap'])
    app.filter('startFrom', function () {
        return function (input, start) {
            if (input) {
                start = +start;
                return input.slice(start);
            }
            return [];
        };
    });
    app.controller('MyController', function ($scope, $http, $window) {
        $scope.showLoader = true;
   
        //-------------- Get Currency
        var request = {
            method: 'get',
            url: '/JsonAng/Currency',
            dataType: 'json',
            contentType: "application/json"
        };
        $scope.ArrayCurrency = new Array;
        $http(request)
            .success(function (jsonData) {
                $scope.ArrayCurrency = jsonData;
                $scope.Currency = $scope.ArrayCurrency;
                $scope.showLoader = false;
            })
            .error(function () {
                $("#Failure").show();
            });
        //-------------- Get Currency
        //-------------- Get ExtraFee Types
        var request = {
            method: 'get',
            url: '/JsonAng/ExtraFee',
            dataType: 'json',
            contentType: "application/json"
        };
        $scope.ArrayACType = new Array;
        $http(request)
            .success(function (jsonData) {
                $scope.ArrayExtraFee = jsonData;
                $scope.ExtraFee = $scope.ArrayExtraFee; 
                $scope.showLoader = false;
            })
            .error(function () {
                $("#Failure").show();
            });
        //-------------- Get ExtraFee Types
       
        //-------------- Get Accommodation details With Id
         var request = {
            method: 'get',
            url: '/JsonAng/GetAccommodationdetails',
            dataType: 'json',
            contentType: "application/json"
        };
        $scope.ArrayACType = new Array;
        $http(request)
            .success(function (jsonData) {
                $scope.showLoader = true;

                $scope.ArrayGetAccommodationdetails = jsonData;
                $scope.GetAccommodationdetails = $scope.ArrayGetAccommodationdetails; 

                $scope.EmailId = $scope.GetAccommodationdetails[0].EmailId;
                $scope.ContactNo = $scope.GetAccommodationdetails[0].ContactNo;
                $scope.ContactNo = $scope.GetAccommodationdetails[0].ContactNo;
                
                    $scope.PostCode = $scope.GetAccommodationdetails[0].PostCode;
                    $scope.Latitude = $scope.GetAccommodationdetails[0].Latitude;
                    $scope.Longitude = $scope.GetAccommodationdetails[0].Longitude;
                    $scope.SearchEngine = $scope.GetAccommodationdetails[0].WebSearch;
                    $scope.UpdateAccommodations.ExtraFeeTypeId = String($scope.GetAccommodationdetails[0].ExtraFeeTypeId);  
                    $scope.UpdateAccommodations.CurrencyId = String($scope.GetAccommodationdetails[0].CurrencyId); 
                    $scope.UpdateAccommodations.PropertyCategory = String($scope.GetAccommodationdetails[0].PropertyCategory);

                $scope.showLoader = false;
            })
            .error(function () {
                $("#Failure").show();
            });
        //-------------- Get Accommodation Types

        /////
        $scope.btntext = "Create";
        $scope.UpdateAccommodation = function () {
            $scope.msg = "Form Validated";
            $scope.btntext = "Please Wiat.....!";
            $http({
                method: 'POST',
                url: '/JsonAng/UpdateAccommodations',
                data: $scope.UpdateAccommodations
            }).then(function (success) {
                console.log(success.data);
                $scope.btntext = "Create";
                $("#Successfully").text(success.data);
                $("#Success").show();
                $window.scrollTo(0, 0);
                }, function (error) {
                    console.log(error);
                    $("#FailureMSG").text(error.data);
                $("#Failure").show();
                $window.scrollTo(0, 0);
                //setTimeout(location.reload.bind(location), 1500);
                $scope.btntext = "Create";
            });

        }
        //
        $scope.listOptions = {
            "min": ["On"],
            "max": ["Off"]
        }
    });
</script>
 
 
